<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>Database-Backed Web Sites</title>
<meta name="version" content="S5 1.0" />
<link rel="stylesheet" href="http://wdd1112.bbkweb.org/s5/slides.css" type="text/css" media="projection" id="slideProj" />
<link rel="stylesheet" href="http://wdd1112.bbkweb.org/s5/opera.css" type="text/css" media="projection" id="operaFix" />
<link rel="stylesheet" href="http://wdd1112.bbkweb.org/s5/print.css" type="text/css" media="print" id="slidePrint" />
<script src="http://wdd1112.bbkweb.org/s5/slides.js" type="text/javascript"></script>
</head><body>

<div class="layout">

<div id="currentSlide"></div>
<div id="header"></div>
<div id="footer">
<h1>Web Design and Development</h1>
<h2>Database-Backed Web Sites</h2>
<div id="controls"></div>
</div>

</div>


<div class="presentation">

<div class="slide">
<h1>Database-Backed Web Sites</h1>
<h2>Kieren Pitts</h2>
</div>


<div class="slide">
<h1>Advantages</h1>
<ul>
<li>Easier to maintain
<ul>
<li>Structured data read from a database</li>
<li>Data processed ready to be displayed</li>
<li>No matter how many records you have, processed in the same way</li>
</ul>
</li>
<li>Easier to repurpose/reuse data in different forms [<a href="http://www.amentsoc.org/events/" target="aesevents">AES events example</a>]</li>
<li>Greater functionality [<a href="http://www.bized.co.uk/dataserv/penndata/pennhome.htm" target="bizeddata">Biz/ed Penn data example</a>]</li>
</ul>
<div class="handout">
</div>
</div>


<div class="slide">
<h1>Disadvantages</h1>
<ul>
<li>More complex to develop (than static HTML pages); need to know:
<ul>
<li>HTML</li>
<li>CSS</li>
<li>Scripting language</li>
<li>SQL</li>
<li>Possibly other database maintenance tools</li>
</ul>
</li>
<li>Reduced performance</li>
<li>Requires specific setup on the server (hosting implications)</li>
<li>Higher costs for development and hosting</li>
<li>Backups</li>
</ul>
<div class="handout">
</div>
</div>


<div class="slide">
<h1>LAMP</h1>
<ul>
<li>Database-backed Web sites commonly use LAMP:
<ul>
<li><strong>L</strong>inux (operating system)</li>
<li><strong>A</strong>pache (Web server)</li>
<li><strong>M</strong>ySQL (database server)</li>
<li><strong>P</strong>erl, <strong>P</strong>HP or <strong>P</strong>ython (programming language)</li>
</ul>
</li>
<li>LAMP is a common setup but there are plenty of others.</li>
</ul>
<div class="handout">
</div>
</div>


<div class="slide">
<h1>Example Application</h1>
<ul>
<li>Create a Web site to display the movies in this <a href="uploads/wdd4/wdd43/movies.csv">CSV file</a></li>
<li>Data structure, three fields/columns:
<ul>
<li>Title - varchar(200)</li>
<li>Description - text</li>
<li>Year - integer</li>
</ul>
</li>
<li>11 records</li>
</ul>

<!-- 

Create table: movies

Add fields:
title 	varchar(200)
description 	text
year int(11)

Import CSV file
Remember to change terminator to comma

Add id column, int, make key, auto_increment and not null
movie_id  	int(11)
ALTER TABLE `movies` ADD `movie_id` INT( 11 ) NOT NULL AUTO_INCREMENT PRIMARY KEY FIRST ;

http://kierenpitts.wdd1112.bbkweb.org/

bbkdemo2012
kierenpitts
9thJune

movies|movies

-->

<div class="handout">
</div>
</div>


<div class="slide">
<h1>Build and populate the database</h1>
<ul>
<li>Empty database already created on Dreamhost
<ul>
<li>Database: bbkdemo2012</li>
<li>Admin user: kierenpitts</li>
<li>Script user: movies</li>
</ul>
</li>
<li>Need to create the &quot;movies&quot; table:<br />
<img src="/uploads/wdd4/wdd43/mysql-table.png" alt="Diagram of the MySQL table we will create" width="267" height="222" style="margin-top : 5px;" />
</li>
</ul>
<div class="handout">
</div>
</div>


<div class="slide">
<h1>Build and populate the database - 2</h1>
<ul>
<li>We'll use <a href="http://www.phpmyadmin.net/home_page/" target="phpmy">phpMyAdmin</a> - a Web-based tool for administering MySQL databases. Log in at: <a href="http://wdd1112-mysql.bbkweb.org" target="phpmy2">wdd1112-mysql.bbkweb.org</a>
<ol>
<li>Create table</li>
<li>Import data</li>
<li>Add a numeric ID to each movie record = movie_id</li>
</ol>
</li>
</ul>
<div class="handout">
</div>
</div>


<div class="slide">
<h1>Index Page</h1>
<pre>
&lt;?php

set_include_path('/home/kierenpitts/.pear/home/kierenpitts/pear/php');
require_once 'MDB2.php';

$dbh = 'mysql://movies:movies@wdd1112-mysql.bbkweb.org/bbkdemo2012';
$mdb2 =&amp; MDB2::factory($dbh);

if (PEAR::isError($mdb2)) {
    echo ($mdb2-&gt;getMessage().' - '.$mdb2-&gt;getUserinfo());
}

$sql ='SELECT movie_id, title FROM movies ORDER BY title';

// run the query
$result = $mdb2-&gt;query($sql);

print &quot;&lt;h1&gt;My movie list&lt;/h1&gt;\n\n&quot;;
print &quot;&lt;ul&gt;\n&quot;;
while ($row = $result-&gt;fetchRow()) {
    list($movie_id, $title) = $row;
    print &quot;&lt;li&gt;&quot;;
    print &quot;&lt;a href=\&quot;movie.php?movie_id=$movie_id\&quot;&gt;$title&lt;/a&gt;&quot;;
    print &quot;&lt;/li&gt;\n&quot;;
}
print &quot;&lt;/ul&gt;\n&quot;;

?&gt;
</pre>
<div class="handout">
</div>
</div>


<div class="slide">
<h1>Movie Page</h1>
<pre>
&lt;?php

set_include_path('/home/kierenpitts/.pear/home/kierenpitts/pear/php');
require_once 'MDB2.php';

$dbh = 'mysql://movies:movies@wdd1112-mysql.bbkweb.org/bbkdemo2012';
$mdb2 =&amp; MDB2::factory($dbh);

if (PEAR::isError($mdb2)) {
    echo ($mdb2-&gt;getMessage().' - '.$mdb2-&gt;getUserinfo());
}

$sql = &quot;SELECT title, description, year FROM movies WHERE movie_id = &quot; . $_GET['movie_id'];

// run the query
$result = $mdb2-&gt;query($sql);

while ($row = $result-&gt;fetchRow()) {
    list($title, $description, $year) = $row;
    print &quot;&lt;h1&gt;$title ($year)&lt;/h1&gt;\n&quot;;
    print &quot;&lt;p&gt;$description&lt;/p&gt;\n&quot;;
}

?&gt;
</pre>
<div class="handout">
</div>
</div>


<div class="slide">
<h1>Advantages Revisited</h1>
<ul>
<li>Easier to maintain (update title in the database and title is updated everywhere)</li>
<li>Easier to repurpose data (same data could be used to construct a list sorted by title and date)</li>
<li>Greater functionality (can show films from certain decades without creating and having to maintain separate pages)</li>
</ul>
<div class="handout">
</div>
</div>


<div class="slide">
<h1>Disadvantages Revisited</h1>
<ul>
<li>More complex to develop (need to know PHP and SQL)</li>
<li>Reduced performance (won't scale as well as static pages)</li>
<li>Higher cost (need to know PHP and SQL)</li>
</ul>
<div class="handout">
</div>
</div>

<div class="slide">
<h1>Web application frameworks</h1>
<ul>
<li>Common/modern way to do Web development</li>
<li>Rapid application development - provide libraries for common tasks. For example:
	<ul>
	<li>Database access</li>
	<li>Templating</li>
	<li>Data validation</li>
	<li>Authentication/session management</li>
	</ul>
</li>
<li>Most frameworks use the model-view-controller (MVC) pattern
	<ul>
	<li>model - maintaining the data</li>
	<li>view - displaying the data</li>
	<li>controller - controls events that affect data or display of data</li>
        </ul>
</li>
<li>Examples: <a href="http://framework.zend.com/" target="zend">Zend</a> (PHP), <a href="http://symfony.com/" target="symfony">Symfony</a> (PHP), <a href="http://cakephp.org/" target="cakephp">CakePHP</a> (PHP), <a href="https://www.djangoproject.com/" target="django">Django</a> (Python), <a href="http://www.catalystframework.org/" target="catalyst">Catalyst</a> (Perl), <a href="http://rubyonrails.org/" target="ruby">Ruby on Rails</a> (Ruby)</li>
</ul>
<div class="handout">
</div>
</div>

<div class="slide">
<h1>Useful tools</h1>
<ul>
<li>Integrated Development Environment
	<ul>
	<li>code editor</li>
	<li>debugger</li>
	<li>compiler/interpreter</li>
	<li>source control</li>
	</ul>
</li>
<li>Example IDEs: <a href="http://www.eclipse.org/" target="eclipse">Eclipse</a>, <a href="http://www.activestate.com/komodo-edit" target="komodo">Komodo Edit</a></li>
<li>Database managment tools
	<ul>
	<li><a href="http://www.phpmyadmin.net/home_page/index.php" target="phpmyad">phpMyAdmin</a></li>
	<li><a href="http://wb.mysql.com/" target="mysqlwb">MySQL Workbench</a></li>
	<li>Command line tool</li>
	</ul>
</li>
<li>Source control
	<ul>
	<li><a href="http://subversion.tigris.org/" target="svn">Subversion</a></li>
	<li><a href="http://git-scm.com/" target="git">Git</a></li>
	</ul>
</li>
</ul>
<div class="handout">
</div>
</div>

<div class="slide">
<h1>Reading</h1>
<ul>
<li><a href="http://www.w3schools.com/sql/" target="w3schoolssql">W3Schools SQL Tutorial</a></li>
<li><a href="http://sqlzoo.net/" target="sqlzoo">SQLzoo - Interactive SQL Tutorial</a></li>
<li><a href="http://www.w3schools.com/php/" target="w3schoolsphp">W3Schools PHP Tutorial</a></li>
<li><a href="http://www.perl.org/books/beginning-perl/" target="perl">Beginning Perl</a></li>
</ul>
<div class="handout">
</div>
</div>


<div class="slide">
<h1></h1>
</div>

</div>

</body>
</html>
