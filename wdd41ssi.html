<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>SSIs</title>
<meta name="version" content="S5 1.0" />
<link rel="stylesheet" href="http://wdd1617.bbkweb.org/s5/slides.css" type="text/css" media="projection" id="slideProj" />
<link rel="stylesheet" href="http://wdd1617.bbkweb.org/s5/opera.css" type="text/css" media="projection" id="operaFix" />
<link rel="stylesheet" href="http://wdd1617.bbkweb.org/s5/print.css" type="text/css" media="print" id="slidePrint" />
<script src="http://wdd1617.bbkweb.org/s5/slides.js" type="text/javascript"></script>
</head><body>

<div class="layout">

<div id="currentSlide"></div>
<div id="header"></div>
<div id="footer">
<h1>Web Design and Development</h1>
<h2>SSIs</h2>
<div id="controls"></div>
</div>

</div>


<div class="presentation">

<div class="slide">
<h1>Server Side Includes</h1>
<h2>Kieren Pitts</h2>
</div>


<div class="slide">

<h1>Introduction</h1>
<p>Before we look at SSIs, we need to know what happens when you visit a Web site.</p>

<ol>
<li>All machines on the Internet use an Internet Protocol (IP) address to refer to each other, e.g.: 69.163.184.47</li>

<li>User types a URL into a browser address bar or follows a link, e.g.:<br />http://wdd1617.bbkweb.org/wdd41agenda.html</li>
<li>Browser refers to Domain Name Servers to convert wdd1617.bbkweb.org into an IP address</li>
<li>The IP address is for the server hosting the web site
	<ul>
	<li>What's a server? Hardware or software?</li>
	</ul>
</li>
</ol>
<div class="handout">
</div>
</div>

<div class="slide">
<h1>Introduction continued</h1>
<ol start="5">
<li>Browser sends a request for /wdd41agenda.html to the server</li>
<li>Web server receives the request for the page /wdd41agenda.html</li>
<li>HTML file sent back to browser</li>
<li>Browser reads the HTML and sends requests for any ancillary files to the server:
	<ul>
		<li>CSS</li>
		<li>Images</li>
		<li>JavaScript files</li>
	</ul>
</li>
</ol>
<div class="handout">
</div>
</div>



<div class="slide">

<h1>Server Side Includes</h1>

<ul>
<li>Server Side Includes (SSIs) are directives/instructions within a web page that are <em>parsed</em> by the Web server <strong>before</strong> the page is returned to the browser</li>
<li>These instructions can be used to include other files or show extra information</li>
<li>Separate presentation from content by storing repetitive HTML fragments in a separate file. Each fragment can then be included in many pages using SSIs</li>
<li>HTML fragments don't have to represent valid HTML (or complete pages) themselves. The web server combines all the SSIs and page code together <strong>before</strong> sending it to the browser. Only at this point does the code need to be valid HTML</li>
<li>Most Web servers support SSIs</li>
<li>Only covering <a href="http://httpd.apache.org/" target="apache">Apache</a> because it's the <a href="https://news.netcraft.com/archives/2017/04/21/april-2017-web-server-survey.html#more-24567" target="netcraft"> most popular Web server</a> and DreamHost uses it</li>
<li>You need a web server. <strong>SSIs won't be included if files are viewed offline</strong></li>
</ul>
<div class="handout">
</div>
</div>


<div class="slide">

<h1>Parsed Files and Syntax</h1>
<ul>
<li>Many file types can be parsed for SSIs</li>
<li>Since parsing a file is more work for the server, files to be parsed are often identified by file extension, with .shtml being common (e.g. <a target="dreamhost" href="http://blog.dreamhosters.com/kbase/index.cgi?area=174">DreamHost</a>)</li>

<li>Basic syntax:<br /><tt>&lt;!--#element attribute=value --&gt;</tt></li>
<li>Example:<br /><tt>&lt;!--#echo var=&quot;DATE_LOCAL&quot; --&gt;</tt></li>
<li><tt>&lt;!--#echo var=&quot;LAST_MODIFIED&quot; --&gt;</tt></li>
<li><tt>&lt;!--#echo var=&quot;DATE_GMT&quot; --&gt;</tt></li>

</ul>
<div class="handout">
</div>
</div>


<div class="slide">

<h1>Changing format</h1>
<ul>
<li>Can set the format of the time using, e.g.:</li>
<li><tt>&lt;!--#config timefmt=&quot;%B %d, %Y&quot; --&gt;</tt></li>
<li><a href="http://www.comptechdoc.org/independent/web/cgi/ssimanual/ssitime.html" target="timecode">Time formatting codes</a></li>
<li>The above formatting works on Dreamhost, but if it doesn't then can use a .htaccess file to do the same (see later slide)</li>
</ul>
<div class="handout">
</div>
</div>


<div class="slide">
<h1>Separation of Content and Presentation</h1>
<p>Most common use for SSIs</p>

<p>Example file:</p>
<tt>
&lt;!--#include virtual=&quot;ssi/header.ssi&quot; --&gt;
<br />
&lt;p&gt;Content&lt;/p&gt;
<br />
&lt;!--#include virtual=&quot;/ssi/footer.ssi&quot; --&gt;

</tt>

<p>In this case <tt>header.ssi</tt> and <tt>footer.ssi</tt> are in an <tt>ssi</tt> subdirectory but where you put them in your htdocs is up to you.</p>
<p>Can use either relative path (<tt>ssi/header.ssi</tt>) or absolute path (<tt>/ssi/footer.ssi</tt>)</p>

<p>Now you only need to edit <tt>ssi/header.ssi</tt> and <tt>ssi/footer.ssi</tt> to change the look and feel</p>

<p>File extension is not important, common extensions are .html, .ssi or .txt</p>
<div class="handout">
</div>
</div>


<div class="slide">
<h1>.htaccess files</h1>
<ul>
<li>.htaccess is just a configuration file that you put in a directory. It allows a custom configuration to be applied to a directory and any sub-directories within it</li>
<li>Files beginning with a . may be hidden in your FTP client so you may need to configure it to display hidden files. You may also have to upload the file as htaccess.txt (for example) and then rename it to .htaccess</li>
<li>.htaccess files are very powerful and we'll meet them again later in the course</li>
<li>Word of warning - if you get the syntax of a directive within an .htaccess file wrong you'll probably receive a server error. Web servers are <strong>fault intolerant</strong></li>
<li>Example date/time formatting:<br /><tt>SSITimeFormat &quot;%B %d, %Y&quot;</tt></li>
</ul>
<div class="handout">
</div>
</div>

<div class="slide">

<h1>Allowing other files to include SSIs</h1>

<ul>
<li>Dreamhost's default setup is to only parse .shtml files for SSIs</li>
<li>To allow other files to be parsed, create a .htaccess file which contains:
<ul>
<li>AddHandler server-parsed .filenametobeparsed</li>
</ul>
</li>
<li>For example, to parse .html, .htm and .ssi files your .htaccess file would contain:
<ul>
<li>AddHandler server-parsed .html</li>
<li>AddHandler server-parsed .htm</li>
<li>AddHandler server-parsed .ssi</li>
</ul>
</li>
<li><em>Remember</em>, using SSIs means you <strong>must view your pages online</strong></li> 
<li><em>Remember</em>, SSIs do not need to be complete HTML documents on their own</li> 
</ul>
<div class="handout">
</div>
</div>


<!--
<div class="slide">
<h1>PHP</h1>
<ul>
<li>PHP: Hypertext Preprocessor - covered in greater detail later in WDD4</li>
<li>PHP is a scripting language used to create dynamic web pages</li>
<li>User accesses: http://www.example.com/foo.php
<ul>
	<li>Web server runs the foo.php program and <em>returns the output</em></li>
	<li>Web server doesn't return the contents of foo.php</li>
	<li>Web browser gets HTML back and is <strong>none-the-wiser</strong> about how it was generated</li>
</ul>
</li>
</ul>

<div class="handout">
</div>
</div>


<div class="slide">
<h1>PHP includes</h1>
<ul>
<li>PHP includes are very similar to SSIs but used in PHP files</li>
<li>Syntax:
<ul>
	<li>&lt;?php include(&quot;example.php&quot;); ?&gt;</li>

	<li>Included file can contain HTML or PHP code</li>
	<li>If PHP code, use &lt;?php and ?&gt; in include file</li>
	<li><tt>require</tt> is almost identical to <tt>include</tt> but <tt>require</tt> generates a fatal error if there's an error and the script will stop. <tt>include</tt> generates a warning and the script still runs</li>

</ul>
</li>
</ul>
<div class="handout">
</div>
</div>


<div class="slide">
<h1>PHP include example</h1>

<ul>
<li>PHP includes are very similar to SSIs but used in PHP files</li>

<li>Syntax:
<ul>
	<li>&lt;?php include(&quot;example.php&quot;); ?&gt;</li>
	<li>Included file can contain HTML or PHP code</li>
	<li>If PHP code, must be careful about scope</li>
</ul>
</li>
</ul>
<div class="handout">

</div>
</div>

<div class="slide">
<h1>PHP include example 2</h1>

<p>example.php</p>

<tt>
&lt;h1&gt;Hi there!&lt;/h1&gt;<br />
&lt;?php<br />
$name = &quot;Kieren&quot;;<br />
echo (&quot;&lt;p&gt;Hi $name&lt;/p&gt;&quot;);<br />
include(&quot;var.php&quot;);<br />
echo (&quot;&lt;p&gt;Hi $name&lt;/p&gt;&quot;);<br />
?&gt;<br />
&lt;?php include(&quot;footer.ssi&quot;); ?&gt;
</tt>

<p>var.php</p>

<tt>
$name = &quot;Ian&quot;;
</tt>

<div class="handout">

</div>
</div>

-->

<div class="slide">
<h1></h1>
</div>

</div>

</body>
</html>
